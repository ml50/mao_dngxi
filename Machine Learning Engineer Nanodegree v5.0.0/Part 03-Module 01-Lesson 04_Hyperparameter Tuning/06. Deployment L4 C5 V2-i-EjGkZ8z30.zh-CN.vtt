WEBVTT
Kind: captions
Language: zh-CN

00:00:00.000 --> 00:00:03.180
超参数优化作业运行完毕后

00:00:03.180 --> 00:00:05.520
我们可以测试模型 看看运行效果

00:00:05.520 --> 00:00:08.160
和之前一样 首先新建一个 estimator 对象

00:00:08.160 --> 00:00:14.490
然后将其连接到已经完成的训练作业上

00:00:14.490 --> 00:00:17.790
我们将其附加到在超参数优化作业中

00:00:17.790 --> 00:00:21.360
发现的最佳训练作业

00:00:21.360 --> 00:00:25.020
我们已经有了训练过的 estimator

00:00:25.020 --> 00:00:28.785
可以使用训练的 estimator 创建 transformer 对象

00:00:28.785 --> 00:00:32.715
然后开始批转换作业以测试模型

00:00:32.715 --> 00:00:36.690
和之前一样 转换作业在后台运行

00:00:36.690 --> 00:00:41.910
需要调用 wait() 方法等待转换作业运行完毕

00:00:41.910 --> 00:00:44.460
批转换作业似乎失败了

00:00:44.460 --> 00:00:46.230
为何？

00:00:46.230 --> 00:00:48.845
遗憾的是 这里的输出结果

00:00:48.845 --> 00:00:53.210
并没有清晰地告诉我们问题在哪

00:00:53.210 --> 00:00:55.265
实际上 在底部有条消息

00:00:55.265 --> 00:00:57.445
“See job logs for more information.”

00:00:57.445 --> 00:01:01.985
看来需要打开 CloudWatch

00:01:01.985 --> 00:01:05.420
检查下该批转换作业的输出是什么

00:01:05.420 --> 00:01:08.390
并看看错误在哪

00:01:08.390 --> 00:01:15.275
切换到 SageMaker 控制台 点击列表底部的“Batch transform jobs”

00:01:15.275 --> 00:01:18.155
可以在右侧看到失败的批转换作业

00:01:18.155 --> 00:01:22.590
选择这个转换作业 向下滚动到“Monitor”部分

00:01:22.590 --> 00:01:25.320
点击“View logs”链接

00:01:25.320 --> 00:01:28.215
打开此批转换作业的 CloudWatch 日志

00:01:28.215 --> 00:01:31.170
我们看看 data-log

00:01:31.170 --> 00:01:38.270
点击打开该日志 看到有个列表项提到

00:01:38.270 --> 00:01:41.210
在读取测试数据集时 出错了

00:01:41.210 --> 00:01:45.170
展开每项错误

00:01:45.170 --> 00:01:49.400
这个错误提示

00:01:49.400 --> 00:01:56.065
发送的推理数据有 5,001 列

00:01:56.065 --> 00:02:02.270
而在推理时应该出现的特征数量只有 5,000 个

00:02:02.270 --> 00:02:05.000
这表明我们创建测试数据集时

00:02:05.000 --> 00:02:08.135
出现了某种问题

00:02:08.135 --> 00:02:11.150
回到 notebook

00:02:11.150 --> 00:02:14.360
一直滚动到测试数据集的创建部分

00:02:14.360 --> 00:02:17.105
看看问题可能出在哪

00:02:17.105 --> 00:02:19.910
看起来我们按照保存验证集和训练集的方式

00:02:19.910 --> 00:02:24.319
保存了测试集

00:02:24.319 --> 00:02:26.480
训练和验证集

00:02:26.480 --> 00:02:29.210
需要真实标签

00:02:29.210 --> 00:02:31.335
但是测试集不需要

00:02:31.335 --> 00:02:36.735
所以保存测试集的方式错了

00:02:36.735 --> 00:02:41.210
应该使用这行代码

00:02:41.210 --> 00:02:44.600
即将测试集直接保存到 csv 中

00:02:44.600 --> 00:02:49.505
不包含真实标签

00:02:49.505 --> 00:02:50.990
完成这一步后

00:02:50.990 --> 00:02:57.690
我们需要将新的测试集上传到 S3

00:02:57.690 --> 00:03:04.010
然后重新运行批转换作业

00:03:04.010 --> 00:03:05.390
指定新上传的

00:03:05.390 --> 00:03:11.205
正确测试集所在的位置 然后等待运行完毕

00:03:11.205 --> 00:03:13.900
批转换作业运行完毕后

00:03:13.900 --> 00:03:16.430
我们将输出文件复制到

00:03:16.430 --> 00:03:21.630
本地 notebook 记事本 看看模型的表现如何

